# Backend Setup Checklist

## üöÄ –ó–∞ 15 –º–∏–Ω—É—Ç –¥–æ —Ä–∞–±–æ—Ç–∞—é—â–µ–π –ë–î

### ‚úÖ –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (1-2 –º–∏–Ω)

```bash
npm install @prisma/client prisma bcryptjs
```

### ‚úÖ –®–∞–≥ 2: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Prisma (30 —Å–µ–∫)

```bash
npx prisma init
```

### ‚úÖ –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `.env.local` (1 –º–∏–Ω)

–ó–∞–º–µ–Ω–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞:

```env
DATABASE_URL="file:./dev.db"
NEXT_PUBLIC_API_URL="http://localhost:3001"
```

### ‚úÖ –®–∞–≥ 4: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ Schema (2 –º–∏–Ω)

1. –û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª `BACKEND_SETUP.md`
2. –ù–∞–π–¥–∏ —Ä–∞–∑–¥–µ–ª "–®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è SQLite"
3. –°–∫–æ–ø–∏—Ä—É–π –≤–µ—Å—å –∫–æ–¥ –∏–∑ `prisma/schema.prisma`
4. –ó–∞–º–µ–Ω–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `prisma/schema.prisma` –Ω–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥

### ‚úÖ –®–∞–≥ 5: –°–æ–∑–¥–∞–Ω–∏–µ –ë–î –∏ –º–∏–≥—Ä–∞—Ü–∏–π (1 –º–∏–Ω)

```bash
npx prisma migrate dev --name init
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç:

- ‚úÖ `dev.db` —Ñ–∞–π–ª (—Ç–≤–æ—è –ë–î)
- ‚úÖ –¢–∞–±–ª–∏—Ü—ã –≤ –ë–î
- ‚úÖ –ü–∞–ø–∫—É `prisma/migrations`

### ‚úÖ –®–∞–≥ 6: –°–æ–∑–¥–∞–Ω–∏–µ API Routes (5 –º–∏–Ω)

–°–æ–∑–¥–∞–π —ç—Ç–∏ —Ñ–∞–π–ª—ã (—Å–∫–æ–ø–∏—Ä—É–π –∏–∑ `BACKEND_SETUP.md`):

- [ ] `app/api/auth/login/route.ts`
- [ ] `app/api/auth/register/route.ts`
- [ ] `app/api/schedules/route.ts`
- [ ] `app/api/bookings/route.ts`

### ‚úÖ –®–∞–≥ 7: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ AuthContext (2 –º–∏–Ω)

–ó–∞–º–µ–Ω–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `contexts/AuthContext.tsx` –Ω–∞ –≤–µ—Ä—Å–∏—é –∏–∑ `BACKEND_SETUP.md` –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç API

### ‚úÖ –®–∞–≥ 8: –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2 –º–∏–Ω)

```bash
npm run dev
```

–¢–µ—Å—Ç–∏—Ä—É–π –Ω–∞ http://localhost:3001:

- [ ] `/bus/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
- [ ] `/bus/login` - –≤—Ö–æ–¥ –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
- [ ] –ü—Ä–æ–≤–µ—Ä—å `dev.db` —Ñ–∞–π–ª - –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω

---

## üóÑÔ∏è –ß—Ç–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –ë–î

### –¢–∞–±–ª–∏—Ü—ã:

- **User** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (email, –ø–∞—Ä–æ–ª—å, –∏–º—è, —Ä–æ–ª—å)
- **Schedule** - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Ä–µ–π—Å–æ–≤ (–º–∞—Ä—à—Ä—É—Ç, –≤—Ä–µ–º—è, —Ü–µ–Ω–∞)
- **Booking** - –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —Ä–µ–π—Å, —Å—Ç–∞—Ç—É—Å)
- **Review** - –æ—Ç–∑—ã–≤—ã (–æ—Ü–µ–Ω–∫–∞, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π)

### –ü—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö:

```json
User: {
  id: "abc123",
  name: "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  email: "ivan@example.com",
  password: "$2a$10$..." (—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π),
  role: "user"
}

Schedule: {
  id: "sch123",
  from: "–ò—Ä–∫—É—Ç—Å–∫",
  to: "–û–ª—å—Ö–æ–Ω",
  departureTime: "2024-01-15T08:00:00",
  price: 250000 (–≤ –∫–æ–ø–µ–π–∫–∞—Ö = 2500‚ÇΩ)
}
```

---

## üìä –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–î

### –û—Ç–∫—Ä—ã—Ç—å Prisma Studio (–∫—Ä–∞—Å–∏–≤—ã–π UI):

```bash
npx prisma studio
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ http://localhost:5555 - –º–æ–∂–µ—à—å –≤–∏–¥–µ—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ, –¥–æ–±–∞–≤–ª—è—Ç—å, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

---

## üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ:

```prisma
// –í prisma/schema.prisma –¥–æ–±–∞–≤—å –ø–æ–ª–µ
model User {
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
  avatar String? // –Ω–æ–≤–æ–µ –ø–æ–ª–µ
}
```

–ü–æ—Ç–æ–º –≤—ã–ø–æ–ª–Ω–∏:

```bash
npx prisma migrate dev --name added_avatar_field
```

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û

### –ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å –≤ git:

- [ ] `.env.local` - –¥–æ–±–∞–≤—å –≤ `.gitignore`
- [ ] `dev.db` - –¥–æ–±–∞–≤—å –≤ `.gitignore`

### –ö–æ–º–º–∏—Ç–∏—Ç—å –≤ git:

- [ ] `prisma/schema.prisma`
- [ ] `prisma/migrations/` –ø–∞–ø–∫–∞
- [ ] API routes

### –î–ª—è production:

- [ ] –ò—Å–ø–æ–ª—å–∑—É–π PostgreSQL –≤–º–µ—Å—Ç–æ SQLite
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏ –ë–î –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
- [ ] –ò—Å–ø–æ–ª—å–∑—É–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è connection string

---

## üÜò –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –û—à–∏–±–∫–∞: "PRISMA CLIENT not found"

```bash
npm install @prisma/client
npx prisma generate
```

### –û—à–∏–±–∫–∞: "dev.db is locked"

```bash
# –ó–∞–∫—Ä–æ–π –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã Node.js –∏ –∑–∞–ø—É—Å—Ç–∏ —Å–Ω–æ–≤–∞
# –ò–ª–∏ —É–¥–∞–ª–∏ .next –ø–∞–ø–∫—É
rm -rf .next
npm run dev
```

### –û—à–∏–±–∫–∞ –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –°–±—Ä–æ—Å –ë–î (–£–î–ê–õ–ò–¢ –í–°–ï –î–ê–ù–ù–´–ï!)
npx prisma migrate reset
```

### –•–æ—á—É —É–≤–∏–¥–µ—Ç—å SQL –∑–∞–ø—Ä–æ—Å—ã

```bash
# –î–æ–±–∞–≤—å –≤ .env.local
DATABASE_URL="file:./dev.db"
DEBUG="prisma:*"

# –ó–∞–ø—É—Å—Ç–∏ —Å –¥–µ–±–∞–≥–æ–º
npm run dev 2>&1 | grep -i "prisma"
```

---

## üìö –î–∞–ª—å—à–µ

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –ë–î —Ä–∞–±–æ—Ç–∞–µ—Ç:

- [ ] –î–æ–±–∞–≤—å JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è —Å–µ—Å—Å–∏–π
- [ ] –î–æ–±–∞–≤—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] –ü–æ–¥–∫–ª—é—á–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–π email –æ—Ç–ø—Ä–∞–≤–∫—É

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ö–æ–≥–¥–∞ –≤—Å–µ –≥–æ—Ç–æ–≤–æ, –ø—Ä–æ–≤–µ—Ä—å:

- [ ] `dev.db` —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [ ] `npm run dev` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] http://localhost:3001/bus/login –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø—Ä–æ–≤–µ—Ä—å –≤ `npx prisma studio`)
- [ ] –õ–æ–≥–∏–Ω –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤—Ö–æ–¥–∏—Ç

**–ì–æ—Ç–æ–≤–æ! üéâ –¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π backend —Å –ë–î!**

---

_–î–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–º–æ—Ç—Ä–∏ `BACKEND_SETUP.md`_
